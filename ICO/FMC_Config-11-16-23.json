[{"Body":{"ClassId":"workflow.CustomDataTypeDefinition","CompositeType":true,"Description":"Expect Prompt models a single expect and answer prompt of the interactive command.\n","Label":"Expect Prompt","Name":"ExpectPrompt","ObjectType":"workflow.CustomDataTypeDefinition","ParameterSet":[],"Properties":{"ObjectType":"workflow.CustomDataTypeProperties"},"SharedScope":"shared","TypeDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The regular expression of the expect prompt of the Interactive command. You must provide the complete regular expression of the expect string and the expression must end with special character '$' to match the end of the Expect string.\n","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Expect","Name":"Expect","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints","Regex":".*\\$$"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The answer string to the Expect prompt.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Send","Name":"Send","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"}}]},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/CustomDataTypeDefinitions","Verb":"POST"},{"Body":{"ClassId":"workflow.CustomDataTypeDefinition","CompositeType":true,"Description":"SSH command to execute on the remote server. SSH task executor supports executing non-interactive and prompts based interactive commands.\n","Label":"SSH Command Type","Name":"SshCommandType","ObjectType":"workflow.CustomDataTypeDefinition","ParameterSet":[{"Condition":"eq","ControlParameter":"CommandType","EnableParameters":["ExpectPrompts","ShellPrompt"],"Name":"enablePrompt","ObjectType":"workflow.ParameterSet","Value":"InteractiveCmd"}],"Properties":{"ObjectType":"workflow.CustomDataTypeProperties"},"SharedScope":"shared","TypeDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The SSH commands that are to be run on the remote server. Multiple commands can be configured to be run on the given target by chaining the commands with special characters - '&&'  ';' '|' etc. Note that command chaining is allowed only when the command type is Non-Interactive.\n","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Command","Name":"Command","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The SSH command type to be run on the remote server. The SSH task supports running Non-Interactive and expect prompts based Interactive commands.\n","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"Radio"},"Label":"Command Type","Name":"CommandType","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[{"Label":"Non-Interactive","ObjectType":"workflow.EnumEntry","Value":"NonInteractiveCmd"},{"Label":"Interactive","ObjectType":"workflow.EnumEntry","Value":"InteractiveCmd"}],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"enum"},"Required":true},{"ArrayItemType":{"ObjectType":"workflow.CustomArrayItem","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"ExpectPrompt","ObjectType":"workflow.CustomDataProperty"}},"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Expect prompts required as part of command execution. It is a collection of ExpectPrompt type.\n","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Expect Prompts","Max":10,"Min":1,"Name":"ExpectPrompts","ObjectType":"workflow.ArrayDataType","Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The regular expression of the Shell Prompt of the remote server or target. You must provide the complete regular expression of the Shell Prompt and it must end with special character '$' to match the end of the Shell Prompt string.\n","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Shell Prompt","Name":"ShellPrompt","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints","Regex":".*\\$$"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true}]},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/CustomDataTypeDefinitions","Verb":"POST"},{"Body":{"ClassId":"workflow.CustomDataTypeDefinition","Description":"The types of values that can be extracted from API responses in IO Generic API tasks.","Label":"Response Parameter Type","Name":"ResponseParameterTypeEnum","ObjectType":"workflow.CustomDataTypeDefinition","ParameterSet":[],"Properties":{"ObjectType":"workflow.CustomDataTypeProperties"},"SharedScope":"shared","TypeDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The types of values that can be extracted from API responses in IO Generic API tasks. The JSON type can be used to extract any type of value from response as a parameter.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Parameter Type","Name":"ParameterType","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[{"Label":"String","ObjectType":"workflow.EnumEntry","Value":"string"},{"Label":"Integer","ObjectType":"workflow.EnumEntry","Value":"integer"},{"Label":"Float","ObjectType":"workflow.EnumEntry","Value":"float"},{"Label":"Boolean","ObjectType":"workflow.EnumEntry","Value":"boolean"},{"Label":"JSON","ObjectType":"workflow.EnumEntry","Value":"json"}],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"enum"},"Required":true}]},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/CustomDataTypeDefinitions","Verb":"POST"},{"Body":{"ClassId":"workflow.CustomDataTypeDefinition","CompositeType":true,"Description":"This data type takes information about a parameter that needs to be extracted from an API response in Generic API tasks.","Label":"Response Parameter","Name":"TextResponseParameter","ObjectType":"workflow.CustomDataTypeDefinition","ParameterSet":[],"Properties":{"ObjectType":"workflow.CustomDataTypeProperties"},"SharedScope":"shared","TypeDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The regular expression of the line in the command response where the interested capture value resides. The format to specify the capture value in this input is '$&lt;Name of the parameter&gt;'. For example, if we need to capture 'intersight' in the sample response 'intersight@cisco.com', the regular expression must be $&lt;Name&gt;\\@cisco\\.com where 'Name' is the name given to the captured parameter.\n","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Regular Expression","Name":"RegexLine","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Name of the output under which the captured value is saved. This is the same name that needs to be given in the capture group in the Regular Expression field. For example, if the value of the Regular Expression field is $&lt;ParameterName&gt;\\@cisco\\.com, then the Name field must be given the value - ParameterName.\n","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Name","Name":"Name","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The response parameter type - String, Integer, Float, Boolean. The default value is String.\n","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Type","Name":"Type","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"ResponseParameterTypeEnum","ObjectType":"workflow.CustomDataProperty"}}]},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/CustomDataTypeDefinitions","Verb":"POST"},{"Body":{"ClassId":"workflow.CustomDataTypeDefinition","CompositeType":true,"Description":"Response parser framework supports extraction of required values from API/device responses. These responses may be of various content types such as XML, JSON, etc. The values of importance are modeled as parameters in the response parser framework.\nThe parameters can be of a scalar value type or a collection of values. A group of related parameters can be modeled as a single complex type parameter. These complex types will be very useful to extract a set of repeating group of related parameters.\nA response parser specification defines the set of parameters that need to be extracted from the content. The response parser specification allows complex type definitions to be defined for any complex parameters.","Label":"Response Parser","Name":"TextResponseParserType","ObjectType":"workflow.CustomDataTypeDefinition","ParameterSet":[],"Properties":{"ObjectType":"workflow.CustomDataTypeProperties"},"SharedScope":"shared","TypeDefinition":[{"ArrayItemType":{"ObjectType":"workflow.CustomArrayItem","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"TextResponseParameter","ObjectType":"workflow.CustomDataProperty"}},"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The collection of parameters that need to be extracted from the API response.\n","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Parameters","Max":10,"Min":1,"Name":"Parameters","ObjectType":"workflow.ArrayDataType"}]},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/CustomDataTypeDefinitions","Verb":"POST"},{"Body":{"ClassId":"workflow.TaskDefinition","DefaultVersion":true,"Description":"Executes SSH commands against the given endpoint. This task can be executed on targets added as SSH Endpoint or Ansible Endpoint in Intersight.\n","Label":"Invoke SSH Commands","Name":"InvokeSshCommands","ObjectType":"workflow.TaskDefinition","Properties":{"ExternalMeta":true,"InputDefinition":[{"CustomDataTypeProperties":{"CatalogMoid":"shared","ObjectType":"workflow.CustomDataProperty"},"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The external target on which the SSH commands are run. The SSH commands can be run only on targets added as SSH Endpoint or Ansible Endpoint target in Intersight and are in the connected state.\n","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"External Target","Name":"Target","ObjectType":"workflow.TargetDataType","Properties":[{"DisplayAttributes":["Name","TargetType"],"ObjectType":"workflow.TargetProperty","Selector":"/api/v1/asset/Targets?$filter=((TargetType eq SSHEndpoint or TargetType eq AnsibleEndpoint) and Status eq Connected)","SelectorProperty":{"Method":"GET","ObjectType":"workflow.SelectorProperty"},"SupportedObjects":["asset.Target"]}],"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The SSH commands that are run on the remote server along with the details of the SSH command.\n","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"SSH Command","Name":"SshCommand","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"SshCommandType","ObjectType":"workflow.CustomDataProperty"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The command timeout in seconds for the execution of the command against the given endpoint. The default command timeout is 600 seconds. Range is from 10 to 7200 seconds.\n","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Command Timeout","Name":"Timeout","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"Max":7200,"Min":10,"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"integer"}},{"ArrayItemType":{"ObjectType":"workflow.PrimitiveArrayItem","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"integer"}},"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The list of expected command exit codes of the execution of the command against the given endpoint. Default exit code of 0 is used to determine the status of command execution when this input is not provided.\n","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Expected Exit Codes","Max":10,"Name":"ExpectedExitCodes","ObjectType":"workflow.ArrayDataType"},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Set this value to True if the entire command response needs to be displayed as part of the task output. Default value is false.\n","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Show Command Output","Name":"ShowCommandOutput","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"boolean"}},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The structure of the response parser which provides the list of values that need to be extracted from the response.\n","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Response Parser","Name":"ResponseParser","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"TextResponseParserType","ObjectType":"workflow.CustomDataProperty"}}],"ObjectType":"workflow.Properties","OutputDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The exit code after the execution of the command against the given endpoint.\n","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Exit Code","Name":"ExitCode","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"}},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The complete response after the execution of the command against the given endpoint.\n","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Command Output","Name":"CommandOutput","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"}},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Captures the error encountered while executing the command.\n","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Command Execution Error","Name":"CommandExecutionError","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"}},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The extracted parameters after the execution of the command against the given endpoint.\n","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Extracted Parameters","Name":"ExtractedParameters","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"json"}}],"RetryDelay":60,"RetryPolicy":"Fixed","SupportStatus":"Supported","Timeout":7200,"TimeoutPolicy":"Timeout"},"RollbackTasks":[],"SecurePropAccess":true,"SharedScope":"shared","Tags":[{"Key":"category","Value":"Executors"}],"Version":1},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/TaskDefinitions","Verb":"POST"},{"Body":{"ClassId":"workflow.WorkflowDefinition","DefaultVersion":true,"InputDefinition":[],"InputParameterSet":[],"Label":"FMC_Config","Name":"FMC_Config","ObjectType":"workflow.WorkflowDefinition","OutputDefinition":[],"Properties":{"ExternalMeta":true,"ObjectType":"workflow.WorkflowProperties","SupportStatus":"Supported"},"SharedScope":"user","Tasks":[{"Name":"StartTask","NextTask":"InvokeSshCommands1","ObjectType":"workflow.StartTask"},{"Name":"SuccessEndTask","ObjectType":"workflow.SuccessEndTask"},{"Name":"FailureEndTask","ObjectType":"workflow.FailureEndTask"},{"CatalogMoid":"shared","Description":"Executes SSH commands against the given endpoint. This task can be executed on targets added as SSH Endpoint or Ansible Endpoint in Intersight.\n","InputParameters":{"SshCommand":{"Command":"cd fmc/ && terraform apply -var-file=dcloud.tfvars -auto-approve","CommandType":"NonInteractiveCmd"}},"Label":"FMC Config","Name":"InvokeSshCommands1","ObjectType":"workflow.WorkerTask","OnSuccess":"SuccessEndTask","TaskDefinitionName":"InvokeSshCommands","Version":1}],"UiInputFilters":[],"UiRenderingData":{"Positions":[{"Name":"StartTask","X":10,"Y":18},{"Name":"SuccessEndTask","X":10,"Y":529},{"Name":"FailureEndTask","X":152,"Y":529},{"Name":"InvokeSshCommands1","X":49.5,"Y":196}]},"VariableDefinition":[],"Version":1},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/WorkflowDefinitions","Verb":"POST"},{"Body":{"Batch":[{"ContentType":"text","FileTransferToRemote":{"ObjectType":"workflow.FileTransfer"},"Label":"Start Ssh Session","MessageType":"NewSession","Name":"StartSshSession","ObjectType":"workflow.SshSession","SshConfiguration":{"ObjectType":"workflow.SshConfig"}},{"CaptureCompleteResponse":"{{Btoa .global.task.input.ShowCommandOutput}}","ContentType":"text","ExpectedExitCodes":"{{- if index .global.task.input \"ExpectedExitCodes\" -}}\n  {{.global.task.input.ExpectedExitCodes | ToJson}}\n{{- end -}}","FileTransferToRemote":{"ObjectType":"workflow.FileTransfer"},"Label":"Invoke Ssh Operation","MessageType":"ExecuteCommand","Name":"InvokeSshOperation","ObjectType":"workflow.SshSession","ResponseSpec":"{{- if index .global.task.input \"ResponseParser\" -}}\n  {{.global.task.input.ResponseParser | ToJson}}\n{{- end -}}","SshCommand":"{{- if index .global.task.input \"SshCommand\" -}}\n  {{.global.task.input.SshCommand | ToJson}}\n{{- end -}}","SshConfiguration":{"ObjectType":"workflow.SshConfig"},"SshOpTimeout":"{{- if index .global.task.input \"Timeout\" -}}\n  {{Itoa .global.task.input.Timeout}}\n{{- end -}}"},{"ContentType":"text","FileTransferToRemote":{"ObjectType":"workflow.FileTransfer"},"Label":"Close Ssh Session","MessageType":"CloseSession","Name":"CloseSshSession","ObjectType":"workflow.SshSession","SshConfiguration":{"ObjectType":"workflow.SshConfig"}}],"CancelAction":[],"ClassId":"workflow.SshBatchExecutor","Constraints":{"ObjectType":"workflow.TaskConstraints"},"Description":"Generic SSH Batch Task","Name":"GenericSshBatchTask","ObjectType":"workflow.SshBatchExecutor","Output":{"CommandExecutionError":"{{- if index .global.InvokeSshOperation.output \"CommandExecutionError\" -}}\n  {{.global.InvokeSshOperation.output.CommandExecutionError}}\n{{- end -}}","CommandOutput":"{{- if index .global.InvokeSshOperation.output \"CommandResponse\" -}}\n  {{.global.InvokeSshOperation.output.CommandResponse}}\n{{- end -}}","ExitCode":"{{.global.InvokeSshOperation.output.ExitCode}}","ExtractedParameters":"{{- if index .global.InvokeSshOperation \"output\" -}}\n  {{RemoveKeysFromMap .global.InvokeSshOperation.output \"ExitCode\" \"CommandResponse\" \"CommandExecutionError\" | ToJson}}\n{{- end -}}"},"SharedScope":"shared","TaskDefinition":{"ObjectType":"workflow.TaskDefinition","Selector":"Name eq \"InvokeSshCommands\" and Version eq 1"}},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/SshBatchExecutors","Verb":"POST"}]